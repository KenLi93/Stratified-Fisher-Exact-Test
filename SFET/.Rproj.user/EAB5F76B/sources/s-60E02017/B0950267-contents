source("SFET_tidy.R")
library(dplyr)

avandia.strata <- rep(1:48, each = 2)

avandia.treatment <- rep(1:2, 48)

avandia.nsubjects <- c(357, 176,
                      391, 207,
                      774, 185,
                      213, 109,
                      232, 116,
                      43, 47,
                      121, 124,
                      110, 114,
                      382, 384,
                      284, 135,
                      294, 302,
                      563, 142,
                      278, 279,
                      418, 212,
                      395, 198,
                      203, 106,
                      104, 99,
                      212, 107,
                      138, 139,
                      196, 96,
                      122, 120,
                      175, 173,
                      56, 58,
                      39, 38,
                      561, 276,
                      116, 111,
                      148, 143,
                      231, 242,
                      89, 88,
                      168, 172,
                      116, 61,
                      1172, 377,
                      706, 325,
                      204, 185,
                      288, 280,
                      254, 272,
                      314, 154,
                      162, 160,
                      442, 112,
                      394, 124,
                      2635, 2634,
                      1456, 2895,
                      70, 75,
                      25, 24,
                      232, 115,
                      101, 51,
                      196, 195,
                      676, 225)

avandia.mi <- c(2, 0,
                2, 1,
                1, 1,
                0, 1,
                1, 0,
                0, 1,
                1, 0,
                5, 2,
                1, 0,
                1, 0,
                0, 1,
                2, 0,
                2, 1,
                2, 0,
                2, 1,
                1, 1,
                1, 2,
                2, 0,
                3, 1,
                0, 0,
                0, 1,
                0, 1,
                1, 0,
                1, 0,
                0, 2,
                2, 3,
                1, 0,
                1, 0,
                1, 0,
                1, 0,
                0, 0,
                1, 0,
                0, 0,
                1, 2,
                1, 0,
                1, 0,
                1, 0,
                0, 0,
                1, 0,
                1, 0,
                15, 9,
                27, 41,
                0, 0,
                0, 0,
                0, 0,
                0, 0,
                0, 0,
                0, 0)

mi.pvalue <- SFET(strata = avandia.strata, treatment = avandia.treatment,
                  nsubjects = avandia.nsubjects, nresponders = avandia.mi,
                  case = 1, side = "both")
